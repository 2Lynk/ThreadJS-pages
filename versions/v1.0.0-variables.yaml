# ThreadJS Variable Reference
# Version 1.0.0
# 
# This file defines all available variables in the ThreadJS Designer
# and their properties for autocomplete and documentation.

version: "1.0.0"
description: "Variable schemas for ThreadJS Designer v1.0.0"

categories:
  - name: "Core Variables"
    description: "Essential variables available in event handlers and commands"
    variables:
      - name: "player"
        description: "Player object from join/leave/tick events"
        type: "object"
        properties:
          - name: "name"
            type: "string"
            description: "Player name"
          - name: "tick"
            type: "number"
            description: "Player's tick count"
          - name: "pos"
            type: "array"
            description: "Position array [x, y, z]"
            example: "player.pos[0]"
          - name: "dimensionId"
            type: "string"
            description: "Dimension ID"
            example: "'minecraft:overworld'"
          - name: "uuid"
            type: "string"
            description: "Player UUID"
          - name: "health"
            type: "number"
            description: "Current health points"
          - name: "maxHealth"
            type: "number"
            description: "Maximum health points"
          - name: "gamemode"
            type: "string"
            description: "Current gamemode"
          - name: "x"
            type: "number"
            description: "X coordinate (shorthand for pos[0])"
          - name: "y"
            type: "number"
            description: "Y coordinate (shorthand for pos[1])"
          - name: "z"
            type: "number"
            description: "Z coordinate (shorthand for pos[2])"
        examples:
          - lang: "javascript"
            label: "Welcome player on join"
            code: |
              // Broadcast player's name when they join
              api.onPlayerJoin((player) => {
                api.sendMessage(`Welcome ${player.name}!`);
              });
      
      - name: "evt.player"
        description: "Player object from event context"
        type: "object"
        extends: "player"
      
      - name: "evt.message"
        description: "Chat message text"
        type: "string"
      
      - name: "evt"
        description: "Event object (varies by event type)"
        type: "object"
        properties:
          - name: "player"
            type: "object"
            description: "Player object (chat events)"
            schema: "player"
          - name: "message"
            type: "string"
            description: "Chat message text (chat events)"
          - name: "playerName"
            type: "string"
            description: "Player name (block/item/entity events)"
          - name: "blockId"
            type: "string"
            description: "Block ID (block events)"
            example: "'minecraft:stone'"
          - name: "x"
            type: "number"
            description: "X coordinate (block events)"
          - name: "y"
            type: "number"
            description: "Y coordinate (block events)"
          - name: "z"
            type: "number"
            description: "Z coordinate (block events)"
          - name: "itemId"
            type: "string"
            description: "Item ID (useItem event)"
            example: "'minecraft:diamond_sword'"
          - name: "itemCount"
            type: "number"
            description: "Item count (useItem event)"
          - name: "hand"
            type: "string"
            description: "Hand used (useBlock/useItem)"
            example: "'MAIN_HAND' or 'OFF_HAND'"
          - name: "targetType"
            type: "string"
            description: "Entity type (attackEntity event)"
          - name: "victimType"
            type: "string"
            description: "Victim entity type (damage/death events)"
          - name: "sourceType"
            type: "string"
            description: "Damage source type (damage event)"
          - name: "killedBy"
            type: "string"
            description: "Killer entity type (death event)"
          - name: "amount"
            type: "number"
            description: "Damage amount (damage event)"
        examples:
          - lang: "javascript"
            label: "Log block break events"
            code: |
              // Log block break events
              api.onBlockBreak((evt) => {
                api.log(`${evt.playerName} broke ${evt.blockId}`);
              });
      
      - name: "ctx"
        description: "Command execution context"
        type: "object"
        properties:
          - name: "player"
            type: "object"
            description: "Player who ran command (null if console)"
            schema: "player"
          - name: "source"
            type: "string"
            description: "Command source type"
        examples:
          - lang: "javascript"
            label: "Check command source"
            code: |
              // Check if command was run by a player
              api.registerCommand("info", (ctx, args) => {
                if (ctx.player) {
                  api.sendMessageTo(ctx.player.name, "Hello!");
                }
              });
      
      - name: "ctx.player"
        description: "Player who executed command (may be null)"
        type: "object"
        extends: "player"
      
      - name: "args"
        description: "Command arguments array"
        type: "array"
        properties:
          - name: "[0]"
            type: "string"
            description: "First argument"
          - name: "[1]"
            type: "string"
            description: "Second argument"
          - name: "[n]"
            type: "string"
            description: "Nth argument"
          - name: "length"
            type: "number"
            description: "Number of arguments"

  - name: "Data & Collections"
    description: "Variables for working with blocks, data, and collections"
    variables:
      - name: "block"
        description: "Block ID from getBlock"
        type: "string"
        example: "'minecraft:stone'"
      
      - name: "data"
        description: "Loaded data from loadData (structure varies)"
        type: "object"
        properties:
          - name: "[key]"
            type: "any"
            description: "Property depends on saved data structure"
      
      - name: "players"
        description: "Array of player objects from getPlayers"
        type: "array"
        properties:
          - name: "[0]"
            type: "object"
            description: "First player object"
            schema: "player"
          - name: "[n]"
            type: "object"
            description: "Nth player object"
            schema: "player"
          - name: "length"
            type: "number"
            description: "Number of players"
          - name: "forEach"
            type: "function"
            description: "Iterate over players"
          - name: "map"
            type: "function"
            description: "Map players to new array"
          - name: "filter"
            type: "function"
            description: "Filter players by condition"
      
      - name: "entities"
        description: "Array of entity objects from findEntities"
        type: "array"
        properties:
          - name: "[0]"
            type: "object"
            description: "First entity"
          - name: "[n]"
            type: "object"
            description: "Nth entity"
          - name: "length"
            type: "number"
            description: "Number of entities"
          - name: "uuid"
            type: "string"
            description: "Entity UUID (on array elements)"
          - name: "type"
            type: "string"
            description: "Entity type (on array elements)"
      
      - name: "entityId"
        description: "UUID of spawned entity"
        type: "string"
      
      - name: "item"
        description: "Current iteration item in forEach loop (type varies by array)"
        type: "any"
