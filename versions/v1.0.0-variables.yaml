# ThreadJS Variable Reference
# Version 1.0.0
# 
# This file defines all available variables in the ThreadJS Designer
# and their properties for autocomplete and documentation.

version: "1.0.0"
description: "Variable schemas for ThreadJS Designer v1.0.0"

categories:
  - name: "Core Variables"
    description: "Essential variables available in event handlers and commands"
    variables:
      - name: "player"
        description: "Player object from join/leave/tick events"
        type: "object"
        properties:
          - name: "name"
            type: "string"
            description: "Player name"
          - name: "tick"
            type: "number"
            description: "Player's tick count"
          - name: "pos"
            type: "array"
            description: "Position array [x, y, z]"
            example: "player.pos[0]"
          - name: "dimensionId"
            type: "string"
            description: "Dimension ID"
            example: "'minecraft:overworld'"
          - name: "uuid"
            type: "string"
            description: "Player UUID"
          - name: "health"
            type: "number"
            description: "Current health points"
          - name: "maxHealth"
            type: "number"
            description: "Maximum health points"
          - name: "gamemode"
            type: "string"
            description: "Current gamemode"
          - name: "x"
            type: "number"
            description: "X coordinate (shorthand for pos[0])"
          - name: "y"
            type: "number"
            description: "Y coordinate (shorthand for pos[1])"
          - name: "z"
            type: "number"
            description: "Z coordinate (shorthand for pos[2])"
        examples:
          - lang: "javascript"
            label: "Welcome player on join"
            code: |
              // Broadcast player's name when they join
              api.onPlayerJoin((player) => {
                api.sendMessage(`Welcome ${player.name}!`);
              });
      
      - name: "evt.player"
        description: "Player object from event context"
        type: "object"
        extends: "player"
      
      - name: "evt.message"
        description: "Chat message text"
        type: "string"
      
      - name: "evt"
        description: "Event object (varies by event type)"
        type: "object"
        properties:
          - name: "player"
            type: "object"
            description: "Player object (chat events)"
            schema: "player"
          - name: "message"
            type: "string"
            description: "Chat message text (chat events)"
          - name: "playerName"
            type: "string"
            description: "Player name (block/item/entity events)"
          - name: "blockId"
            type: "string"
            description: "Block ID (block events)"
            example: "'minecraft:stone'"
          - name: "x"
            type: "number"
            description: "X coordinate (block events)"
          - name: "y"
            type: "number"
            description: "Y coordinate (block events)"
          - name: "z"
            type: "number"
            description: "Z coordinate (block events)"
          - name: "itemId"
            type: "string"
            description: "Item ID (item events)"
            example: "'minecraft:diamond_sword'"
          - name: "itemCount"
            type: "number"
            description: "Item count (useItem event)"
          - name: "count"
            type: "number"
            description: "Item count (item drop/pickup/craft events)"
          - name: "hand"
            type: "string"
            description: "Hand used (useBlock/useItem)"
            example: "'MAIN_HAND' or 'OFF_HAND'"
          - name: "targetType"
            type: "string"
            description: "Entity type (attackEntity event)"
          - name: "victimType"
            type: "string"
            description: "Victim entity type (damage/death events)"
          - name: "sourceType"
            type: "string"
            description: "Damage source type (damage event)"
          - name: "killedBy"
            type: "string"
            description: "Killer entity type (death event)"
          - name: "amount"
            type: "number"
            description: "Damage amount (damage event)"
          - name: "fromDimension"
            type: "string"
            description: "Previous dimension (dimension change event)"
          - name: "toDimension"
            type: "string"
            description: "New dimension (dimension change event)"
          - name: "oldGamemode"
            type: "string"
            description: "Previous gamemode (gamemode change event)"
          - name: "newGamemode"
            type: "string"
            description: "New gamemode (gamemode change event)"
          - name: "isEntering"
            type: "boolean"
            description: "True if entering bed (sleep event)"
          - name: "zone"
            type: "string"
            description: "Zone name (zone enter/leave events)"
        examples:
          - lang: "javascript"
            label: "Log block break events"
            code: |
              // Log block break events
              api.onBlockBreak((evt) => {
                api.log(`${evt.playerName} broke ${evt.blockId}`);
              });
      
      - name: "ctx"
        description: "Command execution context"
        type: "object"
        properties:
          - name: "player"
            type: "object"
            description: "Player who ran command (null if console)"
            schema: "player"
          - name: "source"
            type: "string"
            description: "Command source type"
        examples:
          - lang: "javascript"
            label: "Check command source"
            code: |
              // Check if command was run by a player
              api.registerCommand("info", (ctx, args) => {
                if (ctx.player) {
                  api.sendMessageTo(ctx.player.name, "Hello!");
                }
              });
      
      - name: "ctx.player"
        description: "Player who executed command (may be null)"
        type: "object"
        extends: "player"
      
      - name: "args"
        description: "Command arguments array"
        type: "array"
        properties:
          - name: "[0]"
            type: "string"
            description: "First argument"
          - name: "[1]"
            type: "string"
            description: "Second argument"
          - name: "[n]"
            type: "string"
            description: "Nth argument"
          - name: "length"
            type: "number"
            description: "Number of arguments"

  - name: "Data & Collections"
    description: "Variables for working with blocks, data, and collections"
    variables:
      - name: "block"
        description: "Block ID from getBlock"
        type: "string"
        example: "'minecraft:stone'"
      
      - name: "data"
        description: "Loaded data from loadData (structure varies)"
        type: "object"
        properties:
          - name: "[key]"
            type: "any"
            description: "Property depends on saved data structure"
      
      - name: "players"
        description: "Array of player objects from getPlayers"
        type: "array"
        properties:
          - name: "[0]"
            type: "object"
            description: "First player object"
            schema: "player"
          - name: "[n]"
            type: "object"
            description: "Nth player object"
            schema: "player"
          - name: "length"
            type: "number"
            description: "Number of players"
          - name: "forEach"
            type: "function"
            description: "Iterate over players"
          - name: "map"
            type: "function"
            description: "Map players to new array"
          - name: "filter"
            type: "function"
            description: "Filter players by condition"
      
      - name: "entities"
        description: "Array of entity objects from findEntities"
        type: "array"
        properties:
          - name: "[0]"
            type: "object"
            description: "First entity"
          - name: "[n]"
            type: "object"
            description: "Nth entity"
          - name: "length"
            type: "number"
            description: "Number of entities"
          - name: "uuid"
            type: "string"
            description: "Entity UUID (on array elements)"
          - name: "type"
            type: "string"
            description: "Entity type (on array elements)"
      
      - name: "entityId"
        description: "UUID of spawned entity"
        type: "string"
      
      - name: "item"
        description: "Current iteration item in forEach loop (type varies by array)"
        type: "any"

      - name: "inventory"
        description: "Player inventory object from getInventory"
        type: "object"
        properties:
          - name: "items"
            type: "array"
            description: "Array of inventory items"
          - name: "size"
            type: "number"
            description: "Inventory size"

      - name: "hasItem"
        description: "Boolean indicating if player has item"
        type: "boolean"

      - name: "raycastResult"
        description: "Block raycast result"
        type: "object"
        properties:
          - name: "hit"
            type: "boolean"
            description: "Whether a block was hit"
          - name: "x"
            type: "number"
            description: "Hit block X coordinate"
          - name: "y"
            type: "number"
            description: "Hit block Y coordinate"
          - name: "z"
            type: "number"
            description: "Hit block Z coordinate"
          - name: "blockId"
            type: "string"
            description: "Hit block ID"
          - name: "face"
            type: "string"
            description: "Hit block face"

      - name: "raycastEntity"
        description: "Entity raycast result"
        type: "object"
        properties:
          - name: "hit"
            type: "boolean"
            description: "Whether an entity was hit"
          - name: "uuid"
            type: "string"
            description: "Hit entity UUID"
          - name: "type"
            type: "string"
            description: "Hit entity type"
          - name: "distance"
            type: "number"
            description: "Distance to entity"

      - name: "bossbarId"
        description: "Bossbar ID from showBossbar"
        type: "string"

      - name: "nbt"
        description: "NBT data object from NBT operations"
        type: "object"
        properties:
          - name: "[key]"
            type: "any"
            description: "NBT tags (structure varies)"

      - name: "time"
        description: "World time from getTime"
        type: "number"

      - name: "scoreboard"
        description: "Scoreboard name from createScoreboard"
        type: "string"

      - name: "score"
        description: "Score value from getScore"
        type: "number"

      - name: "team"
        description: "Team name from createTeam or getPlayerTeam"
        type: "string"

      - name: "trailId"
        description: "Particle trail ID from spawnParticleTrail"
        type: "string"

      - name: "exists"
        description: "Boolean from dataExists"
        type: "boolean"

      - name: "value"
        description: "Numeric value from data increment/decrement"
        type: "number"

      - name: "hasPermission"
        description: "Boolean from hasPermission check"
        type: "boolean"

      - name: "permissions"
        description: "Array of permission strings"
        type: "array"
        properties:
          - name: "[0]"
            type: "string"
            description: "First permission"
          - name: "length"
            type: "number"
            description: "Number of permissions"

      - name: "structureName"
        description: "Saved structure name"
        type: "string"

      - name: "formResponse"
        description: "Form response from GUI forms"
        type: "object"
        properties:
          - name: "canceled"
            type: "boolean"
            description: "Whether form was canceled"
          - name: "selection"
            type: "number"
            description: "Selected button index (simple form)"
          - name: "button"
            type: "number"
            description: "Selected button (0 or 1, modal form)"
          - name: "values"
            type: "array"
            description: "Input values (custom form)"

      - name: "zone"
        description: "Zone name from createZone"
        type: "string"

      - name: "isInZone"
        description: "Boolean indicating if position is in zone"
        type: "boolean"

      - name: "taskId"
        description: "Scheduled task ID from scheduling operations"
        type: "string"

      - name: "nearestEntity"
        description: "Nearest entity from getNearestEntity"
        type: "object"
        properties:
          - name: "uuid"
            type: "string"
            description: "Entity UUID"
          - name: "type"
            type: "string"
            description: "Entity type"
          - name: "distance"
            type: "number"
            description: "Distance to entity"
          - name: "x"
            type: "number"
            description: "Entity X coordinate"
          - name: "y"
            type: "number"
            description: "Entity Y coordinate"
          - name: "z"
            type: "number"
            description: "Entity Z coordinate"
