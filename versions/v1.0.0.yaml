openapi: 3.0.3
info:
  title: ThreadJS API Reference
  version: 1.0.0
  description: |
    **ThreadJS** Reference

tags:
  - name: Quickstart
  - name: Core
  - name: Messaging
  - name: Commands
  - name: Mods
  - name: Events
  - name: World
  - name: Players
  - name: Entities
  - name: Data
  - name: Scheduling
  - name: Sound
  - name: Debug

paths:
  #################
  ##   QUICKSTART
  #################
  /quickstart:
    tags: [Quickstart]
    summary: Getting started with ThreadJS
    description: |
      ## Setup Tutorial

      1. Install Fabric Loader and Fabric API for your Minecraft version.  
      2. Drop the ThreadJS mod jar into your `mods` folder.  
      3. Start the game/server once to generate the `/jsmods` directory.  
      4. Create a new file in `/jsmods/`, e.g. `hello.js`.  
      5. Use `/threadjs reload` in-game or in the console to hot-reload scripts.  
      6. Make yourself an operator to run admin commands and test features.

      Anything that the mod should do while running you declare inside of the  ```onInitialize(api) { ... } ``` function. 
      This is the main functinon of the mod.
    x-codeSamples:
      - lang: JavaScript
        label: hello.js â€“ first script
        source: |
          // /jsmods/hello.js
          api.registerMod("hello", {
            onInitialize(api) {
              api.log("Hello from ThreadJS!");

              api.onPlayerJoin(player => {
                api.sendMessage(`Welcome ${player.name}!`);
              });
            }
          });

  #################
  ##   Inspector
  #################
  /quickstart/inspector:
    summary: Using the Inspector
    tags: [Quickstart]
    description: |
      ## Debugging with the ThreadJS Inspector

      ThreadJS comes with a built-in **Inspector** available directly on the documentation website.
      It helps you debug scripts, test API calls, view object data, and understand what functions
      return â€” without needing to go in-game constantly.

      ### ðŸ” Opening the Inspector
      At the top of this documentation page, click:

      **ðŸ§ª Inspector**

      This opens a live console powered by the ThreadJS runtime.

      ### ðŸ“ 1. Logging values with `api.log()`
      Use `api.log()` to print simple values:

      ```javascript
      api.log("Hello from my mod!");
      api.log(42);
      api.log({ foo: "bar", active: true });
      ```

      Logs appear immediately inside the Inspector console.

      ### ðŸ§  2. Inspecting complex objects
      When debugging player data, entities, events, or world state, use:

      ```javascript
      api.debug.describe(value)
      ```

      or the more detailed version:

      ```javascript
      api.debug.inspect(value)
      ```

      **Examples:**

      ```javascript
      const players = api.players.list();
      api.debug.describe(players[0]); // short, readable summary

      api.debug.inspect(players[0]);  // full deep object view
      ```

      `inspect()` is perfect for exploring what fields exist on objects such as:

      - `PlayerState`
      - entity objects
      - event objects (block break, chat messages, etc.)
      - world block data

      ### â±ï¸ 3. Inspecting values during events
      You can drop inspection calls into event listeners:

      ```javascript
      api.onPlayerJoin(player => {
        api.debug.inspect(player);
      });
      ```

      When a player joins the server, the Inspector logs the entire object structure.

      ### ðŸ§¨ 4. Triggering a breakpoint in the Inspector (optional)
      If you want the Inspector to pause and highlight a moment:

      ```javascript
      api.debug.breakpoint();
      ```

      Example:

      ```javascript
      api.onChatMessage(evt => {
        if (evt.message.includes("secret")) {
          api.debug.breakpoint();
        }
      });
      ```

      This is useful for tracking down unexpected behavior.

      ### ðŸŽ¯ Summary

      - Use **Inspector** to debug without restarting your server.
      - Use **`api.log()`** for quick values.
      - Use **`api.debug.describe()`** for readable summaries.
      - Use **`api.debug.inspect()`** for deep inspection.
      - Use **`api.debug.breakpoint()`** to pause execution inside the Inspector.

      Combine these tools to understand exactly how ThreadJS data works.


   #################
  ##   CORE
  #################
  /api/log:
    tags: [Core]
    summary: api.log(message)
    description: |
      Logs any value to the server console.

      - `message` can be a string, number or object.
      - Objects are pretty-printed for easier debugging.
    x-codeSamples:
      - lang: JavaScript
        label: Basic logging
        source: |
          api.log("Hello from ThreadJS!");
          api.log({ foo: "bar", online: api.players.list().length });
          api.log(42);

  /api/scriptsDir:
    tags: [Core]
    summary: api.scriptsDir()
    description: |
      Returns the absolute path of the `/jsmods/` folder where ThreadJS looks
      for your scripts.
    x-codeSamples:
      - lang: JavaScript
        label: Print the scripts directory
        source: |
          const dir = api.scriptsDir();
          api.log(`Scripts are loaded from: ${dir}`);

  #################
  ##   MESSAGING
  #################

  /api/sendMessage:
    tags: [Messaging]
    summary: api.sendMessage(message)
    description: |
      Sends a chat message to **all players** on the server.
    x-codeSamples:
      - lang: JavaScript
        label: Broadcast restart warning
        source: |
          api.sendMessage("Server restart in 5 minutes!");
          api.sendMessage("Welcome to the ThreadJS test server.");

  /api/sendMessageTo:
    tags: [Messaging]
    summary: api.sendMessageTo(playerName, message)
    description: |
      Sends a private chat message to a single player by name.
    x-codeSamples:
      - lang: JavaScript
        label: Whisper to a player
        source: |
          api.sendMessageTo("Steve", "You found a secret room ðŸ‘€");
          api.sendMessageTo("Alex", "PvP is disabled in this area.");

  #################
  ##   COMMANDS
  #################

  /api/registerCommand:
    tags: [Commands]
    summary: api.registerCommand(name, handler, minPermissionLevel?, playerOnly?, argSpec?)
    description: |
      Registers a custom command that can be executed in chat.

      **Parameters**

      - `name` â€“ command name (without `/`).
      - `handler(ctx, args)` â€“ function called when the command runs.
      - `minPermissionLevel` â€“ Minecraft permission level (0â€“4), default `0`.
      - `playerOnly` â€“ if `true`, console cannot run this command.
      - `argSpec` â€“ optional array of tab-completion hints (`"player"`, `"int"`, etc).
    x-codeSamples:
      - lang: JavaScript
        label: Simple /js ping
        source: |
          api.registerCommand("ping", (ctx, args) => {
            ctx.reply("Pong!");
          });

      - lang: JavaScript
        label: Heal command for ops
        source: |
          api.registerCommand(
            "heal",
            (ctx, args) => {
              const [targetName, amountStr] = args;
              const amount = Number(amountStr) || 10;
              api.players.heal(targetName, amount);
              ctx.reply(`Healed ${targetName} for ${amount} HP`);
            },
            2,          // minPermissionLevel (ops+)
            true,       // playerOnly
            ["player", "int"]
          );

  #################
  ##   MODS
  #################

  /api/registerMod:
    tags: [Mods]
    summary: api.registerMod(id, module)
    description: |
      Registers a JavaScript "mod module" with optional lifecycle hooks.

      - `id` â€“ unique string ID for your mod.
      - `module.onInitialize(api)` â€“ called when the server starts.
      - `module.onReload(api)` â€“ called when `/threadjs reload` runs.
    x-codeSamples:
      - lang: JavaScript
        label: Simple mod module
        source: |
          api.registerMod("hello-mod", {
            onInitialize(api) {
              api.log("[hello-mod] initialized");
              api.sendMessage("hello-mod is now live!");
            },
            onReload(api) {
              api.log("[hello-mod] reloaded");
            }
          });

  #################
  ##   EVENTS
  #################

  /api/events/serverTick:
    tags: [Events]
    summary: api.onServerTick(callback)
    description: |
      Runs `callback()` every server tick (~20 times per second).
    x-codeSamples:
      - lang: JavaScript
        label: Simple tick counter
        source: |
          let ticks = 0;
          api.onServerTick(() => {
            ticks++;
            if (ticks % 200 === 0) {
              api.log(`Server has ticked ${ticks} times`);
            }
          });

  /api/events/playerJoin:
    tags: [Events]
    summary: api.onPlayerJoin(callback)
    description: |
      Runs `callback(player)` whenever a player joins the server.
    x-codeSamples:
      - lang: JavaScript
        label: Welcome message
        source: |
          api.onPlayerJoin(player => {
            api.sendMessage(`âœ¨ ${player.name} joined the server!`);
          });

  /api/events/playerLeave:
    tags: [Events]
    summary: api.onPlayerLeave(callback)
    description: |
      Runs `callback(player)` whenever a player leaves the server.
    x-codeSamples:
      - lang: JavaScript
        label: Goodbye log
        source: |
          api.onPlayerLeave(player => {
            api.log(`${player.name} left the game`);
          });

  /api/events/playerTick:
    tags: [Events]
    summary: api.onPlayerTick(callback)
    description: |
      Runs `callback(player)` every tick for each online player.
    x-codeSamples:
      - lang: JavaScript
        label: Give slow regeneration aura
        source: |
          api.onPlayerTick(player => {
            // Example: heal a tiny amount every 2 seconds
            if (player.tick % 40 === 0) {
              api.players.heal(player.name, 0.5);
            }
          });

  /api/events/chatMessage:
    tags: [Events]
    summary: api.onChatMessage(callback)
    description: |
      Runs `callback({ player, message })` whenever someone sends a chat message.
    x-codeSamples:
      - lang: JavaScript
        label: Simple chat filter
        source: |
          const banned = ["badword1", "badword2"];

          api.onChatMessage(evt => {
            if (banned.some(w => evt.message.includes(w))) {
              api.sendMessageTo(evt.player.name, "Watch your language!");
              evt.cancel && evt.cancel(); // if supported
            }
          });

  /api/events/blockBreak:
    tags: [Events]
    summary: api.onBlockBreak(callback)
    description: |
      Runs `callback(event)` whenever a player breaks a block.
    x-codeSamples:
      - lang: JavaScript
        label: Protect spawn region
        source: |
          api.onBlockBreak(evt => {
            if (evt.x < 32 && evt.z < 32 && evt.x > -32 && evt.z > -32) {
              api.sendMessageTo(evt.playerName, "You cannot break blocks at spawn.");
              evt.cancel && evt.cancel();
            }
          });

  /api/events/blockPlace:
    tags: [Events]
    summary: api.onBlockPlace(callback)
    description: |
      Runs `callback(event)` whenever a player places a block.
    x-codeSamples:
      - lang: JavaScript
        label: Log TNT placements
        source: |
          api.onBlockPlace(evt => {
            if (evt.blockId === "minecraft:tnt") {
              api.log(`${evt.playerName} placed TNT at ${evt.x}, ${evt.y}, ${evt.z}`);
            }
          });

  /api/events/useBlock:
    tags: [Events]
    summary: api.onUseBlock(callback)
    description: |
      Runs `callback(event)` whenever a player right-clicks a block.
    x-codeSamples:
      - lang: JavaScript
        label: Open custom menu on chest
        source: |
          api.onUseBlock(evt => {
            if (evt.blockId === "minecraft:chest") {
              api.sendMessageTo(evt.playerName, "You opened a special chest!");
            }
          });

  /api/events/useItem:
    tags: [Events]
    summary: api.onUseItem(callback)
    description: |
      Runs `callback(event)` whenever a player uses an item.
    x-codeSamples:
      - lang: JavaScript
        label: Magic stick
        source: |
          api.onUseItem(evt => {
            if (evt.itemId === "minecraft:stick") {
              api.sendMessageTo(evt.playerName, "Bonk!");
            }
          });

  /api/events/attackEntity:
    tags: [Events]
    summary: api.onAttackEntity(callback)
    description: |
      Runs `callback(event)` whenever a player attacks an entity.
    x-codeSamples:
      - lang: JavaScript
        label: No friendly fire
        source: |
          api.onAttackEntity(evt => {
            if (evt.targetType === "PLAYER") {
              evt.cancel && evt.cancel();
              api.sendMessageTo(evt.playerName, "Friendly fire is disabled.");
            }
          });

  /api/events/entityDamage:
    tags: [Events]
    summary: api.onEntityDamage(callback)
    description: |
      Runs `callback(event)` whenever any entity takes damage.
    x-codeSamples:
      - lang: JavaScript
        label: Log fall damage
        source: |
          api.onEntityDamage(evt => {
            if (evt.sourceType === "FALL") {
              api.log(`Fall damage: ${evt.amount} on ${evt.victimType}`);
            }
          });

  /api/events/entityDeath:
    tags: [Events]
    summary: api.onEntityDeath(callback)
    description: |
      Runs `callback(event)` whenever any entity dies.
    x-codeSamples:
      - lang: JavaScript
        label: Kill feed
        source: |
          api.onEntityDeath(evt => {
            if (evt.killedBy) {
              api.sendMessage(`${evt.killedBy} killed ${evt.victimName || evt.victimType}`);
            }
          });

  /api/events/blockInteract:
    tags: [Events]
    summary: api.onBlockInteract(callback)
    description: |
      Runs `callback(event)` when a player right-clicks (interacts with) a block.
    x-codeSamples:
      - lang: JavaScript
        label: Custom door lock
        source: |
          api.onBlockInteract(evt => {
            if (evt.blockId.includes("door")) {
              api.sendMessageTo(evt.player.name, "This door is locked!");
              evt.cancel && evt.cancel();
            }
          });

  /api/events/blockClick:
    tags: [Events]
    summary: api.onBlockClick(callback)
    description: |
      Runs `callback(event)` when a player left-clicks a block.
    x-codeSamples:
      - lang: JavaScript
        label: Block info tool
        source: |
          api.onBlockClick(evt => {
            api.sendMessageTo(evt.player.name, 
              `Block: ${evt.blockId} at ${evt.x}, ${evt.y}, ${evt.z}`);
          });

  /api/events/itemDrop:
    tags: [Events]
    summary: api.onItemDrop(callback)
    description: |
      Runs `callback(event)` when a player drops an item.
    x-codeSamples:
      - lang: JavaScript
        label: Prevent dropping diamonds
        source: |
          api.onItemDrop(evt => {
            if (evt.itemId === "minecraft:diamond") {
              evt.cancel && evt.cancel();
              api.sendMessageTo(evt.player.name, "You cannot drop diamonds!");
            }
          });

  /api/events/itemPickup:
    tags: [Events]
    summary: api.onItemPickup(callback)
    description: |
      Runs `callback(event)` when a player picks up an item.
    x-codeSamples:
      - lang: JavaScript
        label: Track resource collection
        source: |
          api.onItemPickup(evt => {
            if (evt.itemId === "minecraft:diamond") {
              api.log(`${evt.player.name} found a diamond!`);
            }
          });

  /api/events/itemCraft:
    tags: [Events]
    summary: api.onItemCraft(callback)
    description: |
      Runs `callback(event)` when a player crafts an item.
    x-codeSamples:
      - lang: JavaScript
        label: Achievement system
        source: |
          api.onItemCraft(evt => {
            if (evt.itemId === "minecraft:diamond_pickaxe") {
              api.sendMessage(`${evt.player.name} crafted their first diamond pickaxe!`);
            }
          });

  /api/events/itemConsume:
    tags: [Events]
    summary: api.onItemConsume(callback)
    description: |
      Runs `callback(event)` when a player eats or drinks an item.
    x-codeSamples:
      - lang: JavaScript
        label: Food tracking
        source: |
          api.onItemConsume(evt => {
            api.log(`${evt.player.name} consumed ${evt.itemId}`);
          });

  /api/events/playerRespawn:
    tags: [Events]
    summary: api.onPlayerRespawn(callback)
    description: |
      Runs `callback(event)` when a player respawns after death.
    x-codeSamples:
      - lang: JavaScript
        label: Welcome back message
        source: |
          api.onPlayerRespawn(evt => {
            api.sendMessageTo(evt.player.name, "Welcome back! Be more careful this time.");
          });

  /api/events/playerDimensionChange:
    tags: [Events]
    summary: api.onPlayerDimensionChange(callback)
    description: |
      Runs `callback(event)` when a player changes dimension (Overworld/Nether/End).
    x-codeSamples:
      - lang: JavaScript
        label: Dimension announcements
        source: |
          api.onPlayerDimensionChange(evt => {
            api.sendMessage(`${evt.player.name} entered the ${evt.toDimension}!`);
          });

  /api/events/playerGamemodeChange:
    tags: [Events]
    summary: api.onPlayerGamemodeChange(callback)
    description: |
      Runs `callback(event)` when a player's gamemode changes.
    x-codeSamples:
      - lang: JavaScript
        label: Log gamemode changes
        source: |
          api.onPlayerGamemodeChange(evt => {
            api.log(`${evt.player.name} changed to ${evt.newGamemode}`);
          });

  /api/events/playerSleep:
    tags: [Events]
    summary: api.onPlayerSleep(callback)
    description: |
      Runs `callback(event)` when a player sleeps in a bed.
    x-codeSamples:
      - lang: JavaScript
        label: Sleep announcements
        source: |
          api.onPlayerSleep(evt => {
            const sleeping = api.data.load("server", "sleeping") || 0;
            api.data.save("server", "sleeping", sleeping + 1);
            api.sendMessage(`${sleeping + 1} players are sleeping...`);
          });

  #################
  ##   WORLD
  #################

  /api/world/setBlock:
    tags: [World]
    summary: api.world.setBlock(x, y, z, dimensionId, blockId)
    description: |
      Sets a single block at the given position.
    x-codeSamples:
      - lang: JavaScript
        label: Place a diamond block at spawn
        source: |
          api.world.setBlock(0, 64, 0, "minecraft:overworld", "minecraft:diamond_block");

  /api/world/getBlock:
    tags: [World]
    summary: api.world.getBlock(x, y, z, dimensionId)
    description: |
      Returns information about the block at a given position.
    x-codeSamples:
      - lang: JavaScript
        label: Check block type
        source: |
          const block = api.world.getBlock(0, 64, 0, "minecraft:overworld");
          api.log(`Block at spawn: ${block.blockId}`);

  /api/world/fillArea:
    tags: [World]
    summary: api.world.fillArea(x1, y1, z1, x2, y2, z2, dimensionId, blockId)
    description: |
      Fills a rectangular area with a single block type.
    x-codeSamples:
      - lang: JavaScript
        label: Create glass box
        source: |
          api.world.fillArea(-5, 60, -5, 5, 70, 5, "minecraft:overworld", "minecraft:glass");

  /api/world/replaceBlocks:
    tags: [World]
    summary: api.world.replaceBlocks(x1, y1, z1, x2, y2, z2, dimensionId, fromBlockId, toBlockId)
    description: |
      Replaces all matching blocks in an area with another block type.
    x-codeSamples:
      - lang: JavaScript
        label: Turn all dirt into grass
        source: |
          api.world.replaceBlocks(
            -64, 40, -64,
            64, 80, 64,
            "minecraft:overworld",
            "minecraft:dirt",
            "minecraft:grass_block"
          );

  /api/world/spawnParticle:
    tags: [World]
    summary: api.world.spawnParticle(x, y, z, dimensionId, particleId, count, speed, offsetX, offsetY, offsetZ)
    description: |
      Spawns particles at a location.
    x-codeSamples:
      - lang: JavaScript
        label: Heart particles
        source: |
          api.world.spawnParticle(0, 65, 0, "minecraft:overworld", "minecraft:heart", 10, 0.1, 0.5, 0.5, 0.5);

  /api/world/spawnParticleLine:
    tags: [World]
    summary: api.world.spawnParticleLine(x1, y1, z1, x2, y2, z2, dimensionId, particleId, points)
    description: |
      Spawns a line of particles between two points.
    x-codeSamples:
      - lang: JavaScript
        label: Laser beam effect
        source: |
          api.world.spawnParticleLine(0, 65, 0, 10, 65, 10, "minecraft:overworld", "minecraft:flame", 20);

  /api/world/spawnParticleCircle:
    tags: [World]
    summary: api.world.spawnParticleCircle(x, y, z, dimensionId, particleId, radius, points)
    description: |
      Spawns particles in a circle pattern.
    x-codeSamples:
      - lang: JavaScript
        label: Magic circle
        source: |
          api.world.spawnParticleCircle(0, 65, 0, "minecraft:overworld", "minecraft:enchant", 3, 30);

  /api/world/setWeather:
    tags: [World]
    summary: api.world.setWeather(dimensionId, weather)
    description: |
      Sets the weather in a dimension. Weather can be "CLEAR", "RAIN", or "THUNDER".
    x-codeSamples:
      - lang: JavaScript
        label: Clear skies
        source: |
          api.world.setWeather("minecraft:overworld", "CLEAR");

  /api/world/setTime:
    tags: [World]
    summary: api.world.setTime(dimensionId, time)
    description: |
      Sets the time of day (0 = dawn, 6000 = noon, 12000 = dusk, 18000 = midnight).
    x-codeSamples:
      - lang: JavaScript
        label: Set to noon
        source: |
          api.world.setTime("minecraft:overworld", 6000);

  /api/world/getTime:
    tags: [World]
    summary: api.world.getTime(dimensionId)
    description: |
      Gets the current time of day.
    x-codeSamples:
      - lang: JavaScript
        label: Check if night
        source: |
          const time = api.world.getTime("minecraft:overworld");
          if (time > 13000 && time < 23000) {
            api.log("It's nighttime!");
          }

  /api/world/createExplosion:
    tags: [World]
    summary: api.world.createExplosion(x, y, z, dimensionId, power, fire, breaks)
    description: |
      Creates an explosion at a location.
    x-codeSamples:
      - lang: JavaScript
        label: Fireworks explosion
        source: |
          api.world.createExplosion(0, 70, 0, "minecraft:overworld", 2.0, false, false);

  /api/world/spawnLightning:
    tags: [World]
    summary: api.world.spawnLightning(x, y, z, dimensionId, visualOnly)
    description: |
      Spawns a lightning bolt. Set visualOnly to true for effect without damage.
    x-codeSamples:
      - lang: JavaScript
        label: Visual lightning
        source: |
          api.world.spawnLightning(0, 64, 0, "minecraft:overworld", true);

  /api/world/setSpawn:
    tags: [World]
    summary: api.world.setSpawn(dimensionId, x, y, z)
    description: |
      Sets the world spawn point.
    x-codeSamples:
      - lang: JavaScript
        label: Move spawn
        source: |
          api.world.setSpawn("minecraft:overworld", 100, 64, 100);

  #################
  ##   PLAYERS
  #################

  /api/players/list:
    tags: [Players]
    summary: api.players.list()
    description: |
      Returns an array of `PlayerState` objects for all online players.
    x-codeSamples:
      - lang: JavaScript
        label: Log all player names
        source: |
          const players = api.players.list();
          players.forEach(p => api.log(`Online: ${p.name}`));

  /api/players/teleport:
    tags: [Players]
    summary: api.players.teleport(playerName, x, y, z, dimensionId)
    description: |
      Teleports a player by name to a new position.
    x-codeSamples:
      - lang: JavaScript
        label: Send Steve to spawn
        source: |
          api.players.teleport("Steve", 0, 70, 0, "minecraft:overworld");

  /api/players/setGamemode:
    tags: [Players]
    summary: api.players.setGamemode(playerName, mode)
    description: |
      Sets a player's gamemode.

      - `mode` is one of `SURVIVAL`, `CREATIVE`, `ADVENTURE`, `SPECTATOR`.
    x-codeSamples:
      - lang: JavaScript
        label: Switch to creative
        source: |
          api.players.setGamemode("Steve", "CREATIVE");

  /api/players/setHealth:
    tags: [Players]
    summary: api.players.setHealth(playerName, health)
    description: |
      Sets a player's health to an exact value.
    x-codeSamples:
      - lang: JavaScript
        label: Set full health
        source: |
          api.players.setHealth("Steve", 20);

  /api/players/heal:
    tags: [Players]
    summary: api.players.heal(playerName, amount)
    description: |
      Heals a player by a certain amount.
    x-codeSamples:
      - lang: JavaScript
        label: Heal on command
        source: |
          api.players.heal("Steve", 5);

  /api/players/giveItem:
    tags: [Players]
    summary: api.players.giveItem(playerName, itemId, count)
    description: |
      Gives an item to the player's inventory.
    x-codeSamples:
      - lang: JavaScript
        label: Give diamond sword
        source: |
          api.players.giveItem("Steve", "minecraft:diamond_sword", 1);

  /api/players/playerSetPos:
    tags: [Players]
    summary: api.players.setPos(playerState, x, y, z)
    description: |
      Sets the position on a `PlayerState` object (advanced usage).
    x-codeSamples:
      - lang: JavaScript
        label: Offset all players upwards
        source: |
          api.players.list().forEach(p => {
            api.players.setPos(p, p.pos[0], p.pos[1] + 5, p.pos[2]);
          });

  /api/players/playerTeleport:
    tags: [Players]
    summary: api.players.teleportState(playerState, x, y, z, dimensionId)
    description: |
      Teleports a `PlayerState` object.
    x-codeSamples:
      - lang: JavaScript
        label: Teleport using PlayerState
        source: |
          api.players.list().forEach(p => {
            api.players.teleportState(p, 0, 80, 0, p.dimensionId);
          });

  /api/players/playerSetHealth:
    tags: [Players]
    summary: api.players.setHealthState(playerState, health)
    description: |
      Sets health on a `PlayerState` object.
    x-codeSamples:
      - lang: JavaScript
        label: Set everyone to half health
        source: |
          api.players.list().forEach(p => {
            api.players.setHealthState(p, p.maxHealth / 2);
          });

  /api/players/playerHeal:
    tags: [Players]
    summary: api.players.healState(playerState, amount)
    description: |
      Heals a `PlayerState` by a certain amount.
    x-codeSamples:
      - lang: JavaScript
        label: Regen aura
        source: |
          api.onServerTick(() => {
            api.players.list().forEach(p => {
              api.players.healState(p, 0.1);
            });
          });

  /api/players/playerSetGamemode:
    tags: [Players]
    summary: api.players.setGamemodeState(playerState, mode)
    description: |
      Sets gamemode on a `PlayerState` object.
    x-codeSamples:
      - lang: JavaScript
        label: Spectator all players
        source: |
          api.players.list().forEach(p => {
            api.players.setGamemodeState(p, "SPECTATOR");
          });

  /api/players/playerGiveItem:
    tags: [Players]
    summary: api.players.giveItemState(playerState, itemId, count)
    description: |
      Gives an item to a `PlayerState`'s inventory.
    x-codeSamples:
      - lang: JavaScript
        label: Give everyone cookies
        source: |
          api.players.list().forEach(p => {
            api.players.giveItemState(p, "minecraft:cookie", 16);
          });

  /api/players/playerEquipArmor:
    tags: [Players]
    summary: api.players.equipArmor(playerState, armorSpec)
    description: |
      Equips armor on a `PlayerState`.

      `armorSpec` has optional `helmet`, `chestplate`, `leggings`, `boots` item IDs.
    x-codeSamples:
      - lang: JavaScript
        label: Full diamond armor
        source: |
          api.players.list().forEach(p => {
            api.players.equipArmor(p, {
              helmet: "minecraft:diamond_helmet",
              chestplate: "minecraft:diamond_chestplate",
              leggings: "minecraft:diamond_leggings",
              boots: "minecraft:diamond_boots"
            });
          });

  /api/players/getInventory:
    tags: [Players]
    summary: api.players.getInventory(playerName)
    description: |
      Returns a player's inventory contents with size and items array.
    x-codeSamples:
      - lang: JavaScript
        label: Check inventory
        source: |
          const inv = api.players.getInventory("Steve");
          api.log(`Steve has ${inv.items.length} items`);

  /api/players/clearInventory:
    tags: [Players]
    summary: api.players.clearInventory(playerName)
    description: |
      Clears all items from a player's inventory.
    x-codeSamples:
      - lang: JavaScript
        label: Clear on death
        source: |
          api.onEntityDeath(evt => {
            if (evt.victimType === "PLAYER") {
              api.players.clearInventory(evt.victimName);
            }
          });

  /api/players/hasItem:
    tags: [Players]
    summary: api.players.hasItem(playerName, itemId, count)
    description: |
      Checks if a player has at least the specified count of an item.
    x-codeSamples:
      - lang: JavaScript
        label: Check for diamonds
        source: |
          if (api.players.hasItem("Steve", "minecraft:diamond", 5)) {
            api.log("Steve has at least 5 diamonds!");
          }

  /api/players/removeItem:
    tags: [Players]
    summary: api.players.removeItem(playerName, itemId, count)
    description: |
      Removes a specified count of an item from a player's inventory.
    x-codeSamples:
      - lang: JavaScript
        label: Currency system
        source: |
          if (api.players.removeItem("Steve", "minecraft:diamond", 1)) {
            api.sendMessageTo("Steve", "Purchase successful!");
          }

  /api/players/showTitle:
    tags: [Players]
    summary: api.players.showTitle(playerName, title, subtitle, fadeIn, stay, fadeOut)
    description: |
      Shows a title and subtitle to a player with fade timing (in ticks).
    x-codeSamples:
      - lang: JavaScript
        label: Welcome title
        source: |
          api.players.showTitle("Steve", "Welcome!", "To our server", 10, 70, 20);

  /api/players/showActionbar:
    tags: [Players]
    summary: api.players.showActionbar(playerName, message)
    description: |
      Shows a message on the player's actionbar (above hotbar).
    x-codeSamples:
      - lang: JavaScript
        label: Health warning
        source: |
          api.onPlayerTick(player => {
            if (player.health < 5) {
              api.players.showActionbar(player.name, "âš  Low Health!");
            }
          });

  /api/players/showBossbar:
    tags: [Players]
    summary: api.players.showBossbar(playerName, text, color, style, progress)
    description: |
      Shows a bossbar to a player. Returns a bossbar ID for updates. Progress is 0.0 to 1.0.
    x-codeSamples:
      - lang: JavaScript
        label: Event countdown
        source: |
          const barId = api.players.showBossbar("Steve", "Event starts in 60s", "RED", "PROGRESS", 1.0);

  /api/players/raycast:
    tags: [Players]
    summary: api.players.raycast(playerName, maxDistance)
    description: |
      Raycasts from a player's eyes to find the block they're looking at.
    x-codeSamples:
      - lang: JavaScript
        label: Block info tool
        source: |
          const block = api.players.raycast("Steve", 10);
          if (block) {
            api.log(`Looking at ${block.blockId}`);
          }

  /api/players/raycastEntity:
    tags: [Players]
    summary: api.players.raycastEntity(playerName, maxDistance)
    description: |
      Raycasts to find the entity a player is looking at.
    x-codeSamples:
      - lang: JavaScript
        label: Entity scanner
        source: |
          const result = api.players.raycastEntity("Steve", 20);
          if (result.hit) {
            api.log(`Looking at ${result.type}`);
          }

  /api/players/getPlayerNBT:
    tags: [Players]
    summary: api.players.getPlayerNBT(playerName)
    description: |
      Returns player NBT data (simplified in 1.21+). Contains basic player info.
    x-codeSamples:
      - lang: JavaScript
        label: Check player data
        source: |
          const nbt = api.players.getPlayerNBT("Steve");
          api.log(`XP Level: ${nbt.experienceLevel}`);

  #################
  ##   ENTITIES
  #################

  /api/entities/spawn:
    tags: [Entities]
    summary: api.entities.spawn(entityTypeId, x, y, z, dimensionId)
    description: |
      Spawns a new entity and returns its UUID.
    x-codeSamples:
      - lang: JavaScript
        label: Spawn a cow at spawn
        source: |
          const cowId = api.entities.spawn("minecraft:cow", 0, 64, 0, "minecraft:overworld");
          api.log(`Spawned cow with UUID ${cowId}`);

  /api/entities/kill:
    tags: [Entities]
    summary: api.entities.kill(entityUuid)
    description: |
      Kills an entity by UUID.
    x-codeSamples:
      - lang: JavaScript
        label: Remove an entity
        source: |
          const zombieId = api.entities.spawn("minecraft:zombie", 0, 64, 5, "minecraft:overworld");
          api.entities.kill(zombieId);

  /api/entities/find:
    tags: [Entities]
    summary: api.entities.find(options)
    description: |
      Finds entities around a point.

      `options` can include:

      - `typeId` â€“ optional entity type filter.
      - `center` â€“ `{ x, y, z, dimensionId }`.
      - `radius` â€“ search radius (default `16`).
    x-codeSamples:
      - lang: JavaScript
        label: Count nearby mobs
        source: |
          const center = { x: 0, y: 64, z: 0, dimensionId: "minecraft:overworld" };
          const mobs = api.entities.find({ center, radius: 32 });
          api.log(`There are ${mobs.length} entities near spawn`);

  /api/entities/setVelocity:
    tags: [Entities]
    summary: api.entities.setVelocity(entityUuid, vx, vy, vz)
    description: |
      Sets an entity's velocity vector.
    x-codeSamples:
      - lang: JavaScript
        label: Launch entity upward
        source: |
          const sheepId = api.entities.spawn("minecraft:sheep", 0, 64, 0, "minecraft:overworld");
          api.entities.setVelocity(sheepId, 0, 2, 0);

  /api/entities/teleport:
    tags: [Entities]
    summary: api.entities.teleport(entityUuid, x, y, z, dimensionId)
    description: |
      Teleports an entity to a new position.
    x-codeSamples:
      - lang: JavaScript
        label: Teleport entity
        source: |
          api.entities.teleport(zombieId, 100, 64, 100, "minecraft:overworld");

  /api/entities/getNearestEntity:
    tags: [Entities]
    summary: api.entities.getNearestEntity(x, y, z, dimensionId, radius, typeFilter?)
    description: |
      Finds the nearest entity to a position within radius. Optional type filter.
    x-codeSamples:
      - lang: JavaScript
        label: Find nearest player
        source: |
          const nearest = api.entities.getNearestEntity(0, 64, 0, "minecraft:overworld", 50, "minecraft:player");
          if (nearest) {
            api.log(`Nearest player is ${nearest.distance} blocks away`);
          }

  /api/entities/applyEffect:
    tags: [Entities]
    summary: api.entities.applyEffect(entityUuid, effectId, duration, amplifier)
    description: |
      Applies a status effect to an entity. Duration in ticks, amplifier is effect level (0 = I, 1 = II, etc).
    x-codeSamples:
      - lang: JavaScript
        label: Speed boost
        source: |
          api.entities.applyEffect(entityId, "minecraft:speed", 600, 1); // Speed II for 30 seconds

  /api/entities/getEntityNBT:
    tags: [Entities]
    summary: api.entities.getEntityNBT(entityUuid)
    description: |
      Returns entity NBT data (simplified in 1.21+). Contains basic entity info like position, health, type.
    x-codeSamples:
      - lang: JavaScript
        label: Check entity health
        source: |
          const nbt = api.entities.getEntityNBT(mobId);
          api.log(`Entity health: ${nbt.health}`);

  /api/entities/getBlockNBT:
    tags: [Entities]
    summary: api.entities.getBlockNBT(x, y, z, dimensionId)
    description: |
      Returns NBT data from a block entity (chest, furnace, sign, etc).
    x-codeSamples:
      - lang: JavaScript
        label: Read chest contents
        source: |
          const chestNBT = api.entities.getBlockNBT(10, 64, 10, "minecraft:overworld");
          if (chestNBT) {
            api.log("Found a chest with data");
          }

  #################
  ##   DATA
  #################

  /api/data/load:
    tags: [Data]
    summary: api.data.load(namespace, key)
    description: |
      Loads previously saved data for a given namespace/key pair.

      Returns `undefined` or `null` if not found.
    x-codeSamples:
      - lang: JavaScript
        label: Load player stats
        source: |
          const stats = api.data.load("stats", "Steve") || { kills: 0, deaths: 0 };
          api.log(`Steve has ${stats.kills} kills and ${stats.deaths} deaths`);

  /api/data/save:
    tags: [Data]
    summary: api.data.save(namespace, key, value)
    description: |
      Saves arbitrary JSON-serializable data.
    x-codeSamples:
      - lang: JavaScript
        label: Save player stats
        source: |
          api.data.save("stats", "Steve", {
            kills: 10,
            deaths: 2
          });

  /api/data/exists:
    tags: [Data]
    summary: api.data.exists(namespace, key)
    description: |
      Checks if data exists for the given namespace/key pair.
    x-codeSamples:
      - lang: JavaScript
        label: Check if player has stats
        source: |
          if (!api.data.exists("stats", "Steve")) {
            api.data.save("stats", "Steve", { kills: 0, deaths: 0 });
          }

  /api/data/delete:
    tags: [Data]
    summary: api.data.delete(namespace, key)
    description: |
      Deletes saved data for the given namespace/key pair.
    x-codeSamples:
      - lang: JavaScript
        label: Reset player stats
        source: |
          api.data.delete("stats", "Steve");
          api.sendMessageTo("Steve", "Your stats have been reset.");

  /api/data/increment:
    tags: [Data]
    summary: api.data.increment(namespace, key, amount?)
    description: |
      Increments a numeric value. If the value doesn't exist, it's initialized to 0 first.
    x-codeSamples:
      - lang: JavaScript
        label: Track kills
        source: |
          api.onEntityDeath(evt => {
            if (evt.killedBy) {
              api.data.increment("kills", evt.killedBy, 1);
            }
          });

  /api/data/decrement:
    tags: [Data]
    summary: api.data.decrement(namespace, key, amount?)
    description: |
      Decrements a numeric value. If the value doesn't exist, it's initialized to 0 first.
    x-codeSamples:
      - lang: JavaScript
        label: Currency system
        source: |
          api.data.decrement("currency", "Steve", 10);

  #################
  ##   SCHEDULING
  #################

  /api/scheduling/runLater:
    tags: [Scheduling]
    summary: api.scheduling.runLater(ticks, callback)
    description: |
      Runs `callback()` once after the given number of ticks.
    x-codeSamples:
      - lang: JavaScript
        label: One-shot timer
        source: |
          api.scheduling.runLater(100, () => {
            api.sendMessage("100 ticks have passed!");
          });

  /api/scheduling/runRepeating:
    tags: [Scheduling]
    summary: api.scheduling.runRepeating(intervalTicks, callback)
    description: |
      Runs `callback()` repeatedly every `intervalTicks`.
    x-codeSamples:
      - lang: JavaScript
        label: Repeating announcement
        source: |
          api.scheduling.runRepeating(20 * 60, () => {
            api.sendMessage("Remember to join our Discord!");
          });

  /api/scheduling/runLaterWithId:
    tags: [Scheduling]
    summary: api.scheduling.runLaterWithId(ticks, callback)
    description: |
      Runs `callback()` once after the given number of ticks. Returns a task ID that can be used to cancel it.
    x-codeSamples:
      - lang: JavaScript
        label: Cancellable timer
        source: |
          const taskId = api.scheduling.runLaterWithId(200, () => {
            api.sendMessage("Timer complete!");
          });
          // Cancel if needed:
          // api.scheduling.cancelTask(taskId);

  /api/scheduling/runRepeatingWithId:
    tags: [Scheduling]
    summary: api.scheduling.runRepeatingWithId(intervalTicks, callback)
    description: |
      Runs `callback()` repeatedly every `intervalTicks`. Returns a task ID that can be used to cancel it.
    x-codeSamples:
      - lang: JavaScript
        label: Cancellable repeating task
        source: |
          const taskId = api.scheduling.runRepeatingWithId(100, () => {
            api.sendMessage("Tick!");
          });
          // Stop after 10 seconds:
          api.scheduling.runLater(200, () => {
            api.scheduling.cancelTask(taskId);
          });

  /api/scheduling/cancelTask:
    tags: [Scheduling]
    summary: api.scheduling.cancelTask(taskId)
    description: |
      Cancels a scheduled task by its ID. Returns true if the task was found and cancelled.
    x-codeSamples:
      - lang: JavaScript
        label: Cancel task
        source: |
          const taskId = api.scheduling.runRepeatingWithId(20, () => {
            api.log("Repeating...");
          });
          // Cancel after some condition:
          api.onPlayerJoin(player => {
            api.scheduling.cancelTask(taskId);
          });

  #################
  ##   SOUND
  #################

  /api/sound/playSound:
    tags: [Sound]
    summary: api.playSound(soundId, volume?, pitch?)
    description: |
      Plays a sound to all players on the server.

      - `soundId` â€“ Minecraft sound identifier (e.g., `"entity.player.levelup"`)
      - `volume` â€“ Sound volume (0.0 - 1.0+), default 1.0
      - `pitch` â€“ Sound pitch (0.5 - 2.0), default 1.0 (normal)
    x-codeSamples:
      - lang: JavaScript
        label: Global level-up sound
        source: |
          api.playSound("entity.player.levelup", 1.0, 1.0);

      - lang: JavaScript
        label: Bell alert
        source: |
          api.playSound("block.bell.use", 0.8, 0.8);

  /api/sound/playSoundTo:
    tags: [Sound]
    summary: api.playSoundTo(playerName, soundId, volume?, pitch?)
    description: |
      Plays a sound to a specific player.

      - `playerName` â€“ Player name or UUID
      - `soundId` â€“ Minecraft sound identifier
      - `volume` â€“ Sound volume (0.0 - 1.0+), default 1.0
      - `pitch` â€“ Sound pitch (0.5 - 2.0), default 1.0

      Returns `true` if player was found and sound played.
    x-codeSamples:
      - lang: JavaScript
        label: Achievement sound
        source: |
          api.onBlockBreak(evt => {
            if (evt.blockId === "minecraft:diamond_ore") {
              api.playSoundTo(evt.playerName, "entity.player.levelup", 0.8, 1.0);
              api.sendMessageTo(evt.playerName, "Â§bâœ¨ You found diamonds!");
            }
          });

      - lang: JavaScript
        label: Musical note
        source: |
          api.playSoundTo("Steve", "block.note_block.harp", 1.0, 1.5);

  /api/sound/playSoundAt:
    tags: [Sound]
    summary: api.playSoundAt(x, y, z, dimensionId, soundId, volume?, pitch?)
    description: |
      Plays a sound at a specific position in the world.
      All nearby players will hear it with distance-based attenuation.

      - `x, y, z` â€“ World coordinates
      - `dimensionId` â€“ Dimension identifier (e.g., `"minecraft:overworld"`)
      - `soundId` â€“ Minecraft sound identifier
      - `volume` â€“ Sound volume (0.0 - 1.0+), default 1.0
      - `pitch` â€“ Sound pitch (0.5 - 2.0), default 1.0

      Returns `true` if sound was played successfully.
    x-codeSamples:
      - lang: JavaScript
        label: Explosion at coordinates
        source: |
          api.playSoundAt(
            100, 64, 200,
            "minecraft:overworld",
            "entity.generic.explode",
            1.0, 1.0
          );

      - lang: JavaScript
        label: Ambient cave sound
        source: |
          api.onPlayerTick(player => {
            const pos = player.pos;
            if (pos[1] < 50 && Math.random() < 0.001) {
              api.playSoundAt(
                pos[0], pos[1], pos[2],
                player.dimensionId,
                "ambient.cave",
                0.3, 0.8
              );
            }
          });

  #################
  ##   DEBUG
  #################

  /api/debug/inspect:
    tags: [Debug]
    summary: api.debug.inspect(obj)
    description: |
      Logs a detailed, structured view of an object for debugging.
    x-codeSamples:
      - lang: JavaScript
        label: Inspect PlayerState
        source: |
          const player = api.players.list()[0];
          api.debug.inspect(player);

  /api/debug/describe:
    tags: [Debug]
    summary: api.debug.describe(obj)
    description: |
      Logs a shorter, human-friendly description of an object.
    x-codeSamples:
      - lang: JavaScript
        label: Describe PlayerState
        source: |
          const player = api.players.list()[0];
          api.debug.describe(player);

  /api/debug/breakpoint:
    tags: [Debug]
    summary: api.debug.breakpoint()
    description: |
      Triggers a breakpoint inside the ThreadJS debugger (if attached).
    x-codeSamples:
      - lang: JavaScript
        label: Conditional breakpoint
        source: |
          api.onPlayerJoin(player => {
            if (player.name === "Steve") {
              api.debug.breakpoint();
            }
          });

  /api/debug/setDebugLocal:
    tags: [Debug]
    summary: api.debug.setDebugLocal(options)
    description: |
      Configures where debug output is sent.

      `options` can include:

      - `debugLocal` â€“ enable/disable local debug mode.
      - `logToPlayer` â€“ mirror logs to a player.
      - `playerName` â€“ target player name.
    x-codeSamples:
      - lang: JavaScript
        label: Send debug output to a player
        source: |
          api.debug.setDebugLocal({
            debugLocal: true,
            logToPlayer: true,
            playerName: "Steve"
          });

  /api/debug/startDebugger:
    tags: [Debug]
    summary: api.debug.startDebugger(port?)
    description: |
      Starts the ThreadJS WebSocket debugger on the given port (default `31337`).
    x-codeSamples:
      - lang: JavaScript
        label: Default port
        source: |
          api.debug.startDebugger();

      - lang: JavaScript
        label: Custom port
        source: |
          api.debug.startDebugger(40000);
