openapi: 3.0.3
info:
  title: ThreadJS API Reference
  version: 1.0.0
  description: |
    **ThreadJS** is a powerful Minecraft Fabric mod that allows you to script Minecraft using JavaScript.
    
    Write your scripts in the `config/jsmods` folder and they'll be loaded automatically on server startup.
    Use `/threadjs reload` to hot-reload your scripts without restarting.
    
    ## Quick Start
    
    ```javascript
    // hello.js - runs on server startup
    api.log("Hello from ThreadJS!");
    
    api.onPlayerJoin(player => {
      api.sendMessage(`Welcome ${player.name}!`);
    });
    ```
    
    ## Features
    
    - ðŸŽ® **Event System** - Listen to game events (player join, block break, etc.)
    - ðŸŽ¯ **Commands** - Register custom commands with tab completion
    - ðŸŒ **World Manipulation** - Edit blocks, spawn entities, teleport players
    - ðŸ”§ **Player Management** - Modify health, gamemode, inventory
    - ðŸ“¦ **Mod System** - Create reusable JS modules with lifecycle hooks
    - ðŸ› **Debugging** - WebSocket debugger, inspect objects, breakpoints

    ## How to read this reference

    This is **not** a web/HTTP API. Everything documented here is a **JavaScript scripting API** you call from your ThreadJS scripts.

    The OpenAPI structure is only used so Redoc can render a nice reference:

    - Each **path** (like `/api/log`) represents a JavaScript function (`api.log(...)`).
    - The **request body** describes the function parameters.
    - The **responses** describe the return value or effect.
    - The HTTP method labels (`GET`, `POST`, etc.) have **no runtime meaning** for ThreadJS.
    - There is **no HTTP server** you can call with `curl` or `fetch`.

servers:
  - url: minecraft://localhost:25565
    description: Local Minecraft server

tags:
  - name: Core
  - name: Messaging
  - name: Commands
  - name: Mods
  - name: Events
  - name: World
  - name: Players
  - name: Entities
  - name: Data
  - name: Scheduling
  - name: Debug

paths:
  /api/log:
    post:
      tags: [Core]
      summary: api.log(message)
      description: |
        Log a value to the server console from your script.

        ```javascript
        api.log("Hello from ThreadJS!");
        api.log({ foo: "bar" });
        api.log(42);
        ```
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  oneOf:
                    - type: string
                    - type: object
                    - type: number
      responses:
        '200':
          description: OK (message logged)

  /api/scriptsDir:
    get:
      tags: [Core]
      summary: api.scriptsDir()
      description: |
        Get the absolute path to the `config/jsmods` scripts directory.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  path:
                    type: string
                    description: Absolute path to the scripts folder.

  /api/sendMessage:
    post:
      tags: [Messaging]
      summary: api.sendMessage(message)
      description: |
        Broadcast a chat message to **all** players on the server.

        ```javascript
        api.sendMessage("Server is restarting in 5 minutes!");
        ```
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  description: Text to broadcast.
      responses:
        '200':
          description: OK (message broadcast)

  /api/sendMessageTo:
    post:
      tags: [Messaging]
      summary: api.sendMessageTo(target, message)
      description: |
        Send a private chat message to a specific player by name.

        ```javascript
        api.sendMessageTo("Steve", "You found a secret area!");
        ```
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [target, message]
              properties:
                target:
                  type: string
                  description: Player name.
                message:
                  type: string
                  description: Message content.
      responses:
        '200':
          description: OK (message sent)
        '404':
          description: Target player not found

  /api/registerCommand:
    post:
      tags: [Commands]
      summary: api.registerCommand(name, handler, minPermissionLevel?, playerOnly?, argSpec?)
      description: |
        Register a custom JavaScript-backed command.

        This is a **JavaScript runtime function**, not an HTTP endpoint. The OpenAPI mapping is purely for documentation rendering in Redoc.

        You call it inside your script, e.g.:

        ```javascript
        api.registerCommand("heal", (ctx, args) => {
          // ...
        });

        api.registerCommand("godmode", (ctx, args) => {
          // ...
        }, 2, true);

        api.registerCommand("tp", (ctx, args) => {
          // ...
        }, 0, false, ["player","double","double","double"]);
        ```

        Parameters:
        - `name` (string, required): Command name used after `/js` or `/threadjs run`.
        - `handler` (function, required): `(ctx, args) => {}` invoked on execution.
        - `minPermissionLevel` (int, optional): Minecraft permission level (0â€“4). Default 0.
        - `playerOnly` (boolean, optional): If true, console cannot execute it.
        - `argSpec` (string[] optional): Tab completion hints (e.g. `player`, `int`, `double`).

        Execution examples (in game):

        - `/js heal Steve 10`
        - `/threadjs run tp Steve 0 70 0`

        The handler receives:
        - `ctx`: CommandContext (with `reply(message)` helper).
        - `args`: Array of string arguments.

        Returned value: None (side-effect only).

        Note: This spec uses `POST` only to make the function visible in Redoc. There is **no network call** at `/api/registerCommand`.
      operationId: registerCommand
      x-threadjs-js-function: true
      x-internal: true
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [name, handler]
              properties:
                name:
                  type: string
                handler:
                  type: string
                  description: Stringified form of the JS function in this schema; real usage is in JS.
                minPermissionLevel:
                  type: integer
                  minimum: 0
                  maximum: 4
                  default: 0
                playerOnly:
                  type: boolean
                  default: false
                argSpec:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: Command registered
        '400':
          description: Invalid parameters

  /api/registerMod:
    post:
      tags: [Mods]
      summary: api.registerMod(id, module)
      description: |
        Register a JavaScript "mod module" with optional lifecycle hooks.

        ```javascript
        api.registerMod("hello-mod", {
          onInitialize(api) {
            api.log("hello-mod initialized");
          },
          onReload(api) {
            api.log("hello-mod reloaded");
          }
        });
        ```
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [id, module]
              properties:
                id:
                  type: string
                module:
                  type: object
                  properties:
                    onInitialize:
                      type: string
                      description: Stringified function body (for docs only).
                    onReload:
                      type: string
                      description: Stringified function body (for docs only).
      responses:
        '201':
          description: Mod registered

  /api/events/serverTick:
    post:
      tags: [Events]
      summary: api.onServerTick(callback)
      description: |
        Register a callback that runs every server tick.

        ```javascript
        api.onServerTick(() => {
          // runs every tick
        });
        ```
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                callback:
                  type: string
                  description: Stringified function (for docs only).
      responses:
        '200':
          description: Handler registered

  /api/events/playerJoin:
    post:
      tags: [Events]
      summary: api.onPlayerJoin(callback)
      description: |
        Register a callback for when a player joins the server.

        ```javascript
        api.onPlayerJoin(player => {
          api.sendMessage(`${player.name} joined the server!`);
        });
        ```
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlayerEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/playerLeave:
    post:
      tags: [Events]
      summary: api.onPlayerLeave(callback)
      description: |
        Register a callback for when a player leaves the server.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlayerEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/playerTick:
    post:
      tags: [Events]
      summary: api.onPlayerTick(callback)
      description: |
        Register a callback that runs every tick **per player**.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlayerEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/chatMessage:
    post:
      tags: [Events]
      summary: api.onChatMessage(callback)
      description: |
        Register a callback for every chat message.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                callback:
                  type: string
      responses:
        '200':
          description: Handler registered

  /api/events/blockBreak:
    post:
      tags: [Events]
      summary: api.onBlockBreak(callback)
      description: |
        Register a callback for when a player breaks a block.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BlockEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/blockPlace:
    post:
      tags: [Events]
      summary: api.onBlockPlace(callback)
      description: |
        Register a callback for when a player places a block.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BlockEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/useBlock:
    post:
      tags: [Events]
      summary: api.onUseBlock(callback)
      description: |
        Register a callback for when a player interacts with a block.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UseBlockEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/useItem:
    post:
      tags: [Events]
      summary: api.onUseItem(callback)
      description: |
        Register a callback for when a player uses an item.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UseItemEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/attackEntity:
    post:
      tags: [Events]
      summary: api.onAttackEntity(callback)
      description: |
        Register a callback for when a player attacks an entity.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttackEntityEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/entityDamage:
    post:
      tags: [Events]
      summary: api.onEntityDamage(callback)
      description: |
        Register a callback for when an entity takes damage.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EntityDamageEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/events/entityDeath:
    post:
      tags: [Events]
      summary: api.onEntityDeath(callback)
      description: |
        Register a callback for when an entity dies.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EntityDeathEventHandler'
      responses:
        '200':
          description: Handler registered

  /api/world/setBlock:
    post:
      tags: [World]
      summary: api.world.setBlock(x, y, z, dimensionId, blockId)
      description: |
        Set a single block at the given position.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [x, y, z, dimensionId, blockId]
              properties:
                x: { type: integer }
                y: { type: integer }
                z: { type: integer }
                dimensionId: { type: string }
                blockId: { type: string }
      responses:
        '200':
          description: Block set

  /api/world/getBlock:
    get:
      tags: [World]
      summary: api.world.getBlock(x, y, z, dimensionId)
      description: |
        Get a snapshot of the block at the given position.
      parameters:
        - name: x
          in: query
          required: true
          schema: { type: integer }
        - name: y
          in: query
          required: true
          schema: { type: integer }
        - name: z
          in: query
          required: true
          schema: { type: integer }
        - name: dimensionId
          in: query
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Block snapshot
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlockSnapshot'

  /api/world/fillArea:
    post:
      tags: [World]
      summary: api.world.fillArea(x1, y1, z1, x2, y2, z2, dimensionId, blockId)
      description: |
        Fill a rectangular area with the given block.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [x1, y1, z1, x2, y2, z2, dimensionId, blockId]
              properties:
                x1: { type: integer }
                y1: { type: integer }
                z1: { type: integer }
                x2: { type: integer }
                y2: { type: integer }
                z2: { type: integer }
                dimensionId: { type: string }
                blockId: { type: string }
      responses:
        '200':
          description: Area filled
          content:
            application/json:
              schema:
                type: object
                properties:
                  blocksPlaced:
                    type: integer

  /api/world/replaceBlocks:
    post:
      tags: [World]
      summary: api.world.replaceBlocks(x1, y1, z1, x2, y2, z2, dimensionId, fromBlockId, toBlockId)
      description: |
        Replace blocks of a given type inside a rectangular area.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [x1, y1, z1, x2, y2, z2, dimensionId, fromBlockId, toBlockId]
              properties:
                x1: { type: integer }
                y1: { type: integer }
                z1: { type: integer }
                x2: { type: integer }
                y2: { type: integer }
                z2: { type: integer }
                dimensionId: { type: string }
                fromBlockId: { type: string }
                toBlockId: { type: string }
      responses:
        '200':
          description: Blocks replaced
          content:
            application/json:
              schema:
                type: object
                properties:
                  blocksReplaced:
                    type: integer

  /api/players/list:
    get:
      tags: [Players]
      summary: api.players.list()
      description: |
        List all online players as `PlayerState` objects.
      responses:
        '200':
          description: List of players
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PlayerState'

  /api/players/teleport:
    post:
      tags: [Players]
      summary: api.players.teleport(player, x, y, z, dimensionId)
      description: |
        Teleport a player to a specific position.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [player, x, y, z, dimensionId]
              properties:
                player: { type: string }
                x: { type: number }
                y: { type: number }
                z: { type: number }
                dimensionId: { type: string }
      responses:
        '200':
          description: Player teleported
        '404':
          description: Player not found

  /api/players/setGamemode:
    post:
      tags: [Players]
      summary: api.players.setGamemode(player, mode)
      description: |
        Set a player's gamemode.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [player, mode]
              properties:
                player: { type: string }
                mode:
                  type: string
                  enum: [SURVIVAL, CREATIVE, ADVENTURE, SPECTATOR]
      responses:
        '200':
          description: Gamemode set

  /api/players/setHealth:
    post:
      tags: [Players]
      summary: api.players.setHealth(player, health)
      description: |
        Set a player's health (hearts Ã— 2).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [player, health]
              properties:
                player: { type: string }
                health:
                  type: number
                  minimum: 0
      responses:
        '200':
          description: Health set

  /api/players/heal:
    post:
      tags: [Players]
      summary: api.players.heal(player, amount)
      description: |
        Heal a player by the specified amount.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [player, amount]
              properties:
                player: { type: string }
                amount:
                  type: number
                  minimum: 0
      responses:
        '200':
          description: Player healed

  /api/players/giveItem:
    post:
      tags: [Players]
      summary: api.players.giveItem(player, itemId, count)
      description: |
        Give an item stack to a player.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [player, itemId, count]
              properties:
                player: { type: string }
                itemId: { type: string }
                count:
                  type: integer
                  minimum: 1
      responses:
        '200':
          description: Item given

  /api/players/playerSetPos:
    post:
      tags: [Players]
      summary: api.players.setPos(playerState, x, y, z)
      description: |
        Set the position of a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, x, y, z]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                x: { type: number }
                y: { type: number }
                z: { type: number }
      responses:
        '200':
          description: Position set

  /api/players/playerTeleport:
    post:
      tags: [Players]
      summary: api.players.teleportState(playerState, x, y, z, dimensionId)
      description: |
        Teleport a `PlayerState` to another position / dimension.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, x, y, z, dimensionId]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                x: { type: number }
                y: { type: number }
                z: { type: number }
                dimensionId: { type: string }
      responses:
        '200':
          description: PlayerState teleported

  /api/players/playerSetHealth:
    post:
      tags: [Players]
      summary: api.players.setHealthState(playerState, health)
      description: |
        Set the health of a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, health]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                health: { type: number }
      responses:
        '200':
          description: PlayerState health set

  /api/players/playerHeal:
    post:
      tags: [Players]
      summary: api.players.healState(playerState, amount)
      description: |
        Heal a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, amount]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                amount: { type: number }
      responses:
        '200':
          description: PlayerState healed

  /api/players/playerSetGamemode:
    post:
      tags: [Players]
      summary: api.players.setGamemodeState(playerState, mode)
      description: |
        Set gamemode on a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, mode]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                mode:
                  type: string
                  enum: [SURVIVAL, CREATIVE, ADVENTURE, SPECTATOR]
      responses:
        '200':
          description: PlayerState gamemode set

  /api/players/playerGiveItem:
    post:
      tags: [Players]
      summary: api.players.giveItemState(playerState, itemId, count)
      description: |
        Give an item to a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, itemId, count]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                itemId: { type: string }
                count: { type: integer }
      responses:
        '200':
          description: Item given

  /api/players/playerEquipArmor:
    post:
      tags: [Players]
      summary: api.players.equipArmor(playerState, armorSpec)
      description: |
        Equip armor pieces on a `PlayerState`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [playerState, armorSpec]
              properties:
                playerState:
                  $ref: '#/components/schemas/PlayerState'
                armorSpec:
                  type: object
                  properties:
                    helmet: { type: string, nullable: true }
                    chestplate: { type: string, nullable: true }
                    leggings: { type: string, nullable: true }
                    boots: { type: string, nullable: true }
      responses:
        '200':
          description: Armor equipped

  /api/entities/spawn:
    post:
      tags: [Entities]
      summary: api.entities.spawn(entityTypeId, x, y, z, dimensionId)
      description: |
        Spawn an entity at a position.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [entityTypeId, x, y, z, dimensionId]
              properties:
                entityTypeId: { type: string }
                x: { type: number }
                y: { type: number }
                z: { type: number }
                dimensionId: { type: string }
      responses:
        '201':
          description: Entity spawned
          content:
            application/json:
              schema:
                type: object
                properties:
                  uuid:
                    type: string

  /api/entities/kill:
    delete:
      tags: [Entities]
      summary: api.entities.kill(entityId)
      description: |
        Kill an entity by UUID.
      parameters:
        - name: entityId
          in: query
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Entity killed
        '404':
          description: Entity not found

  /api/entities/find:
    post:
      tags: [Entities]
      summary: api.entities.find(options)
      description: |
        Find entities around a center point, optionally by type.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [center]
              properties:
                typeId:
                  type: string
                center:
                  type: object
                  required: [x, y, z, dimensionId]
                  properties:
                    x: { type: number }
                    y: { type: number }
                    z: { type: number }
                    dimensionId: { type: string }
                radius:
                  type: number
                  default: 16
      responses:
        '200':
          description: Matching entities
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EntitySnapshot'

  /api/data/load:
    get:
      tags: [Data]
      summary: api.data.load(namespace, key)
      description: |
        Load persistent JSON data from the ThreadJS data store.
      parameters:
        - name: namespace
          in: query
          required: true
          schema: { type: string }
        - name: key
          in: query
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Data loaded
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Not found

  /api/data/save:
    post:
      tags: [Data]
      summary: api.data.save(namespace, key, value)
      description: |
        Save persistent JSON data in the ThreadJS data store.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [namespace, key, value]
              properties:
                namespace: { type: string }
                key: { type: string }
                value: { type: object }
      responses:
        '200':
          description: Data saved

  /api/scheduling/runLater:
    post:
      tags: [Scheduling]
      summary: api.scheduling.runLater(ticks, callback)
      description: |
        Schedule a callback to run once after a delay (in ticks).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [ticks, callback]
              properties:
                ticks:
                  type: integer
                  minimum: 0
                callback:
                  type: string
      responses:
        '200':
          description: Task scheduled

  /api/scheduling/runRepeating:
    post:
      tags: [Scheduling]
      summary: api.scheduling.runRepeating(intervalTicks, callback)
      description: |
        Schedule a repeating callback every `intervalTicks`.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [intervalTicks, callback]
              properties:
                intervalTicks:
                  type: integer
                  minimum: 1
                callback:
                  type: string
      responses:
        '200':
          description: Task scheduled

  /api/debug/inspect:
    post:
      tags: [Debug]
      summary: api.debug.inspect(obj)
      description: |
        Inspect an object for debugging purposes.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                obj: {}
      responses:
        '200':
          description: OK

  /api/debug/describe:
    post:
      tags: [Debug]
      summary: api.debug.describe(obj)
      description: |
        Get a human-readable description of an object.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                obj: {}
      responses:
        '200':
          description: OK

  /api/debug/breakpoint:
    post:
      tags: [Debug]
      summary: api.debug.breakpoint()
      description: |
        Hit a debugger breakpoint (if a debugger is attached).
      responses:
        '500':
          description: Breakpoint thrown

  /api/debug/setDebugLocal:
    post:
      tags: [Debug]
      summary: api.debug.setDebugLocal(options)
      description: |
        Configure where debug output goes.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [debugLocal]
              properties:
                debugLocal: { type: boolean }
                logToPlayer:
                  type: boolean
                  default: false
                playerName:
                  type: string
                  nullable: true
      responses:
        '200':
          description: Debug options set

  /api/debug/startDebugger:
    post:
      tags: [Debug]
      summary: api.debug.startDebugger(port?)
      description: |
        Start the WebSocket debugger, optionally specifying a port.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                port:
                  type: integer
                  default: 31337
                  minimum: 1024
                  maximum: 65535
      responses:
        '200':
          description: Debugger started

components:
  schemas:
    BlockSnapshot:
      type: object
      properties:
        blockId: { type: string }
        x: { type: integer }
        y: { type: integer }
        z: { type: integer }
        dimensionId: { type: string }

    PlayerState:
      type: object
      properties:
        _kind: { type: string }
        name: { type: string }
        uuid:
          type: string
          format: uuid
        pos:
          type: array
          items: { type: number }
          minItems: 3
          maxItems: 3
        dimensionId: { type: string }
        gamemode:
          type: string
          nullable: true
          enum: [SURVIVAL, CREATIVE, ADVENTURE, SPECTATOR]
        health: { type: number }
        maxHealth: { type: number }
        xpLevel: { type: integer }
        xpProgress: { type: number }
        mainHand:
          $ref: '#/components/schemas/ItemSummary'
        offHand:
          $ref: '#/components/schemas/ItemSummary'
        inventory:
          $ref: '#/components/schemas/InventorySummary'

    ItemSummary:
      type: object
      properties:
        empty: { type: boolean }
        slot:
          type: integer
          nullable: true
        count:
          type: integer
          nullable: true
        itemId:
          type: string
          nullable: true

    ArmorSummary:
      type: object
      properties:
        helmet:
          $ref: '#/components/schemas/ItemSummary'
        chestplate:
          $ref: '#/components/schemas/ItemSummary'
        leggings:
          $ref: '#/components/schemas/ItemSummary'
        boots:
          $ref: '#/components/schemas/ItemSummary'

    InventorySummary:
      type: object
      properties:
        size: { type: integer }
        nonEmpty: { type: integer }
        hotbar:
          type: array
          items:
            $ref: '#/components/schemas/ItemSummary'
        armor:
          $ref: '#/components/schemas/ArmorSummary'

    EntitySnapshot:
      type: object
      properties:
        uuid:
          type: string
          format: uuid
        typeId:
          type: string
          nullable: true
        name: { type: string }
        pos:
          type: array
          items: { type: number }
          minItems: 3
          maxItems: 3
        dimensionId: { type: string }

    CommandContext:
      type: object
      properties:
        name: { type: string }
        uuid:
          type: string
          format: uuid
          nullable: true
        dimensionId: { type: string }
        player:
          allOf:
            - $ref: '#/components/schemas/PlayerState'
            - nullable: true
        gameProfile:
          type: object
        reply:
          type: string

    BlockEvent:
      type: object
      properties:
        playerName: { type: string }
        uuid:
          type: string
          format: uuid
        blockId: { type: string }
        x: { type: integer }
        y: { type: integer }
        z: { type: integer }
        dimensionId: { type: string }

    UseBlockEvent:
      type: object
      properties:
        playerName: { type: string }
        uuid:
          type: string
          format: uuid
        hand:
          type: string
          enum: [MAIN_HAND, OFF_HAND]
        blockId: { type: string }
        x: { type: integer }
        y: { type: integer }
        z: { type: integer }
        face: { type: string }
        dimensionId: { type: string }

    UseItemEvent:
      type: object
      properties:
        playerName: { type: string }
        uuid:
          type: string
          format: uuid
        hand:
          type: string
          enum: [MAIN_HAND, OFF_HAND]
        itemId: { type: string }
        itemCount: { type: integer }
        dimensionId: { type: string }

    AttackEntityEvent:
      type: object
      properties:
        playerName: { type: string }
        uuid:
          type: string
          format: uuid
        hand:
          type: string
          enum: [MAIN_HAND, OFF_HAND]
        targetType: { type: string }
        targetUuid:
          type: string
          format: uuid
        dimensionId: { type: string }

    EntityDamageEvent:
      type: object
      properties:
        victimUuid:
          type: string
          format: uuid
        victimType: { type: string }
        victimName:
          type: string
          nullable: true
        amount: { type: number }
        sourceType: { type: string }
        attackerUuid:
          type: string
          format: uuid
          nullable: true
        dimensionId: { type: string }

    EntityDeathEvent:
      type: object
      properties:
        victimUuid:
          type: string
          format: uuid
        victimType: { type: string }
        victimName:
          type: string
          nullable: true
        killedBy:
          type: string
          nullable: true
        dimensionId: { type: string }

    PlayerEventHandler:
      type: object
      properties:
        callback:
          type: string

    BlockEventHandler:
      type: object
      properties:
        callback:
          type: string

    UseBlockEventHandler:
      type: object
      properties:
        callback:
          type: string

    UseItemEventHandler:
      type: object
      properties:
        callback:
          type: string

    AttackEntityEventHandler:
      type: object
      properties:
        callback:
          type: string

    EntityDamageEventHandler:
      type: object
      properties:
        callback:
          type: string

    EntityDeathEventHandler:
      type: object
      properties:
        callback:
          type: string
